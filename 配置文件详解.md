 ## 配置文件详解

  APIKEY - 路由器服务的访问密钥

  "APIKEY": "your-secret-key"
  这个 APIKEY 不是 DeepSeek 的 API 密钥，而是 Claude Code Router
  服务本身的访问密钥。

  作用：

- 保护你的路由器服务不被未授权访问
- 当客户端（如 Claude Code）连接到路由器时，需要提供这个密钥
- 在 HTTP 请求中通过 Authorization: Bearer your-secret-key 或
  x-api-key: your-secret-key 头部传递

  安全建议：

- 设置一个复杂的随机字符串
- 如果只在本地使用，可以设置为空字符串或注释掉这行
- 如果暴露在公网，必须设置强密码

  HOST - 服务监听地址

  "HOST": "0.0.0.0"

- 0.0.0.0 表示监听所有网络接口
- 如果只本地使用，可以设置为 127.0.0.1
- 如果没有设置 APIKEY，会强制设置为 127.0.0.1（安全限制）

  PORT - 服务端口

  "PORT": 3456

- 路由器服务监听的端口
- Claude Code 会连接到这个端口

  PROXY_URL - 代理设置

  "PROXY_URL": "http://proxy:7890"

- 如果需要通过代理访问 LLM API，设置代理地址
- 可以是 HTTP/HTTPS 代理

  LOG - 日志开关

  "LOG": true

- true：启用日志记录
- false：禁用日志记录
- 日志文件位置：~/.claude-code-router/claude-code-router.log

  API_TIMEOUT_MS - API 超时时间

  "API_TIMEOUT_MS": 600000

- LLM API 请求的超时时间（毫秒）
- 600000 = 10分钟

  Providers 配置

  Provider 定义

  {
    "name": "deepseek",
    "api_base_url": "https://api.deepseek.com/chat/completions",
    "api_key": "sk-your-api-key",
    "models": ["deepseek-chat", "deepseek-reasoner"],
    "transformer": {
      "use": ["deepseek"],
      "deepseek-chat": {
        "use": ["tooluse"]
      }
    }
  }

  各字段说明：

- name: 提供商名称（自定义）
- api_base_url: LLM API 的完整地址
- api_key: 这才是 DeepSeek 的 API 密钥
- models: 该提供商支持的模型列表
- transformer: 请求/响应转换器配置

  Router 配置

  路由规则

  {
    "default": "deepseek,deepseek-chat",
    "background": "deepseek,deepseek-chat",
    "think": "deepseek,deepseek-reasoner",
    "longContext": "deepseek,deepseek-reasoner",
    "longContextThreshold": 60000
  }

  路由规则说明：

- default: 默认使用的模型
- background: 后台任务使用的模型
- think: 思考模式使用的模型
- longContext: 长上下文（超过阈值）使用的模型
- longContextThreshold: 长上下文阈值（token 数）

  关键区别总结

| 配置项               |  作用                 |  示例 |
| ------------------- | --------------------- | - |
| APIKEY              | 保护路由器服务        |  |
| my-secret-password  |                       |  |
| Providers.api_key   | LLM 提供商的 API 密钥 |  |
| sk-deepseek-api-key |                       |  |

  实际使用场景

1. 本地开发

  {
    "APIKEY": "",
    "HOST": "127.0.0.1",
    "Providers": [
      {
        "name": "deepseek",
        "api_key": "sk-your-real-deepseek-key",
        "models": ["deepseek-chat"]
      }
    ]
  }

2. 生产环境

  {
    "APIKEY": "super-secure-random-string",
    "HOST": "0.0.0.0",
    "Providers": [
      {
        "name": "deepseek",
        "api_key": "sk-your-real-deepseek-key",
        "models": ["deepseek-chat", "deepseek-reasoner"]
      }
    ]
  }

3. 多提供商配置

  {
    "APIKEY": "my-router-key",
    "Providers": [
      {
        "name": "deepseek",
        "api_key": "sk-deepseek-key",
        "models": ["deepseek-chat"]
      },
      {
        "name": "openrouter",
        "api_key": "sk-openrouter-key",
        "models": ["anthropic/claude-3.5-sonnet"]
      }
    ],
    "Router": {
      "default": "deepseek,deepseek-chat",
      "think": "openrouter,anthropic/claude-3.5-sonnet"
    }
  }

  这样配置后，Claude Code 会通过路由器访问不同的 LLM
  服务，而路由器根据配置的规则自动选择合适的模型。
